<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile</title>
  <link rel="stylesheet" href="/css/footer.css">
  <link rel="stylesheet" href="/css/header.css">
  <link rel="stylesheet" href="/css/profile.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/css/scrollbar-design.css">

</head>
<body>

  <header>
    <div id="logo">
      <a href="/">
        <img loading="lazy" src="/img/vixeloe-logo2b-removebg-preview.png" alt="vixeloe">
      </a>
    </div>

    <div id="search" class="search-container">
        <form id="searchForm"  action="/search-results" method="GET">
            <input type="text" id="searchInput" name="query" placeholder="Search for brands and products..." autocomplete="off">
            <button id="searchButton" type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
        </form>
        <div id="suggestions-list"></div>
    </div>

    
    <div id="svx">
        <div id="sellX">
            <a href="/sell">
                <div>
                    <div class="hmxX">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M856-390 570-104q-12 12-27 18t-30 6q-15 0-30-6t-27-18L103-457q-11-11-17-25.5T80-513v-287q0-33 23.5-56.5T160-880h287q16 0 31 6.5t26 17.5l352 353q12 12 17.5 27t5.5 30q0 15-5.5 29.5T856-390ZM513-160l286-286-353-354H160v286l353 354ZM260-640q25 0 42.5-17.5T320-700q0-25-17.5-42.5T260-760q-25 0-42.5 17.5T200-700q0 25 17.5 42.5T260-640Zm220 160Z"/></svg>
                    </div>
                </div>
                <div id="fam">Sell</div>
            </a>
        </div>
        <div id="logX"><a href="/login" style="color: #741374;">Sign Up/Login</a></div>
        <div id="toggle">
            <div id="togglebar"><i class="fa-solid fa-bars"></i></div>
            <div id="toggle-content">
                <div id="cnl1" style="color: #fff">✖</div>
                <div id="brands" class="vive">
                    <div id="brands-btnX">Brands▼</div>
                    <div id="hidden-brandsX">
                        <div id="cnlX">✖</div>
                        <a href="/brand/Samsung">Samsung</a>
                        <a href="/brand/iphone">iPhone</a>
                        <a href="/brand/Infinix">Infinix</a>
                        <a href="/brand/Tecno">Tecno</a>
                        <a href="/brand/Lenovo">Lenovo</a>
                        <a href="/brand/Itel">Itel</a>
                        <a href="/brand/Huawei">Huawei</a>
                        <a href="/brand/Gionee">Gionee</a>
                        <a href="/brand/Oppo">Oppo</a>
                        <a href="/brand/Sony">Sony</a>
                    </div>
                </div>
                <div class="vive">
                    <a href="/listings">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#fff"><path d="M360-240h440v-107H360v107ZM160-613h120v-107H160v107Zm0 187h120v-107H160v107Zm0 186h120v-107H160v107Zm200-186h440v-107H360v107Zm0-187h440v-107H360v107ZM160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Z"/></svg>
                    </a>
                </div>
                <div id="notification" class="vive"><a href="/notifications"><i class="fa-solid fa-bell"></i></a></div>
            </div>
        </div>
    </div>

    <div id="nav">
        <div id="brands">
            <div id="brands-btn">Brands▼</div>
            <div id="hidden-brands">
                <div id="cnl">✖</div>
                    <a href="/brand/Samsung">Samsung</a>
                    <a href="/brand/iPhone">iPhone</a>
                    <a href="/brand/Infinix">Infinix</a>
                    <a href="/brand/Tecno">Tecno</a>
                    <a href="/brand/Lenovo">Lenovo</a>
                    <a href="/brand/Itel">Itel</a>
                    <a href="/brand/Huawei">Huawei</a>
                    <a href="/brand/Gionee">Gionee</a>
                    <a href="/brand/Oppo">Oppo</a>
                    <a href="/brand/Sony">Sony</a>
            </div>
        </div>
        <div id="ads">
            <a href="/listings">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#30b9c0"><path d="M360-240h440v-107H360v107ZM160-613h120v-107H160v107Zm0 187h120v-107H160v107Zm0 186h120v-107H160v107Zm200-186h440v-107H360v107Zm0-187h440v-107H360v107ZM160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Z"/></svg>
            </a>
        </div>
        <div id="sell">
            <a href="/sell">
                <div>
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M856-390 570-104q-12 12-27 18t-30 6q-15 0-30-6t-27-18L103-457q-11-11-17-25.5T80-513v-287q0-33 23.5-56.5T160-880h287q16 0 31 6.5t26 17.5l352 353q12 12 17.5 27t5.5 30q0 15-5.5 29.5T856-390ZM513-160l286-286-353-354H160v286l353 354ZM260-640q25 0 42.5-17.5T320-700q0-25-17.5-42.5T260-760q-25 0-42.5 17.5T200-700q0 25 17.5 42.5T260-640Zm220 160Z"/></svg>
                </div>
                <div>Sell</div>
            </a>
        </div>
        <div id="notification"><a href="/notifications"><i class="fa-solid fa-bell"></i></a></div>

        <% if (isLoggedIn) { %>
            <div class="icons">
                <a href="/profile" class="profile-icon"><i class="fas fa-user"></i></a>
                <a href="/messages" class="message-icon"><i class="fas fa-envelope"></i></a>
                <p id="logout"><a href="/login">Logout</a></p>
            </div>
        <% } else { %>
            <div id="auth-links login">
                <a href="/login">Login/Sign Up</a>
            </div>
        <% } %>
    </div>    
</header>

  <div class="container">
    <h1>User Profile</h1>
    <div class="profile-card">
      <img id="profilePicture" src="<%= user.profilePicture || '/img/placeholderpic.jpg' %>" alt="Profile Picture">
      <div class="profile-info">
        <h2 id="fullName"><%= user.firstName %> <%= user.middleName %> <%= user.lastName %></h2>
        <p><span class="label">Gender:</span> <span id="userGender"><%= user.gender %></span></p>
        <p><span class="label">Date of Birth:</span> <span id="userDOB"><%= user.dateOfBirth %></span></p>
        <p><span class="label">Marital Status:</span> <span id="userMaritalStatus"><%= user.maritalStatus %></span></p>
        <p><span class="label">Occupation:</span> <span id="userOccupation"><%= user.occupation %></span></p>
        <p><span class="label">Status:</span> <span id="userStatus"><%= user.status %></span></p>
        <p><span class="label">Bio:</span> <span id="userBio"><%= user.bio %></span></p>
        <p><span class="label">Email:</span> <span id="userEmail"><%= user.email %></span></p>
        <p><span class="label">Home Address:</span> <span id="homeAddress"><%= user.homeAddress %></span></p>
        <p><span class="label">Office Address:</span> <span id="officeAddress"><%= user.officeAddress %></span></p>
        <p><span class="label">Home Phone:</span> <span id="homePhone"><%= user.homePhone %></span></p>
        <p><span class="label">Mobile Phone:</span> <span id="mobilePhone"><%= user.mobilePhone %></span></p>
        <p><span class="label">Office Phone:</span> <span id="officePhone"><%= user.officePhone %></span></p>
        <button id="editButton">Edit Profile</button>
      </div>
    </div>
    <div id="editForm" class="edit-form hidden">
      <h3>Edit Profile</h3>

      <div id="success-message" style="display: none; color: green;">
        Profile updated successfully
      </div>

      <form id="profile-form" enctype="multipart/form-data">
        <input type="file" name="profilePicture" accept="image/*">
        <input type="text" name="firstName" value="<%= user.firstName %>" placeholder="First Name" autocomplete="off">
        <input type="text" name="middleName" value="<%= user.middleName %>" placeholder="Middle Name" autocomplete="off">
        <input type="text" name="lastName" value="<%= user.lastName %>" placeholder="Last Name" autocomplete="off">
        <select name="gender">
          <option value="">Select Gender</option>
          <option value="male" <%= user.gender === 'male' ? 'selected' : '' %>>Male</option>
          <option value="female" <%= user.gender === 'female' ? 'selected' : '' %>>Female</option>
          <option value="other" <%= user.gender === 'other' ? 'selected' : '' %>>Other</option>
        </select>
        <input type="date" name="dateOfBirth" value="<%= user.dateOfBirth %>" placeholder="Date of Birth">
        <select name="maritalStatus">
          <option value="">Select Marital Status</option>
          <option value="single" <%= user.maritalStatus === 'single' ? 'selected' : '' %>>Single</option>
          <option value="married" <%= user.maritalStatus === 'married' ? 'selected' : '' %>>Married</option>
          <option value="divorced" <%= user.maritalStatus === 'divorced' ? 'selected' : '' %>>Divorced</option>
          <option value="widowed" <%= user.maritalStatus === 'widowed' ? 'selected' : '' %>>Widowed</option>
        </select>
        <input type="text" name="occupation" value="<%= user.occupation %>" placeholder="Occupation" autocomplete="off">
        <select name="status">
          <option value="">Select Status</option>
          <option value="active" <%= user.status === 'active' ? 'selected' : '' %>>Active</option>
          <option value="inactive" <%= user.status === 'inactive' ? 'selected' : '' %>>Inactive</option>
          <option value="suspended" <%= user.status === 'suspended' ? 'selected' : '' %>>Suspended</option>
        </select>
        <textarea name="bio" placeholder="Bio"><%= user.bio %></textarea>
        <input type="email" name="email" value="<%= user.email %>" placeholder="Email" autocomplete="off">
        <input type="text" name="homeAddress" value="<%= user.homeAddress %>" placeholder="Home Address" autocomplete="off">
        <input type="text" name="officeAddress" value="<%= user.officeAddress %>" placeholder="Office Address" autocomplete="off">
        <input type="text" name="homePhone" value="<%= user.homePhone %>" placeholder="Home Phone" autocomplete="off">
        <input type="text" name="mobilePhone" value="<%= user.mobilePhone %>" placeholder="Mobile Phone" autocomplete="off">
        <input type="text" name="officePhone" value="<%= user.officePhone %>" placeholder="Office Phone" autocomplete="off">
        <button id="saveButton" type="submit">Save Changes</button>
        <button id="cancelButton" type="button">Cancel</button>
      </form>
    </div>
  </div>

  <!-- Add this inside the body tag, at the end of the current content -->
    <div id="notificationModal" class="modal hidden">
        <div class="modal-content">
        <span id="modalMessage"></span>
        <button id="closeModalButton">✖</button>
        </div>
    </div>
  
  <script src="/js/profile.js"></script>
</body>
</html>
